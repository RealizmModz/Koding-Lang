{
  "version": 3,
  "sources": ["../../runtime/environment.ts"],
  "sourcesContent": ["import { RuntimeVal } from \"./values.ts\";\n\n\nexport default class Environment {\n\tprivate parent?: Environment;\n\tprivate variables: Map<string, RuntimeVal>;\n\n\tconstructor (parentENV?: Environment) {\n\t\tthis.parent = parentENV;\n\t\tthis.variables = new Map();\n\t}\n\n\tpublic declareVar (varname: string, value: RuntimeVal): RuntimeVal {\n\t\tif (this.variables.has(varname)) {\n\t\t\tthrow `Cannot declare variable ${varname}. As it already is defined.`;\n\t\t}\n\n\t\tthis.variables.set(varname, value);\n\t\treturn value;\n\t}\n\n\tpublic assignVar (varname: string, value: RuntimeVal): RuntimeVal {\n\t\tconst env = this.resolve(varname);\n\t\tenv.variables.set(varname, value);\n\t\treturn value;\n\t}\n\n\tpublic lookupVar (varname: string): RuntimeVal {\n\t\tconst env = this.resolve(varname);\n\t\treturn env.variables.get(varname) as RuntimeVal;\n\t}\n\t\n\tpublic resolve (varname: string): Environment {\n\t\tif (this.variables.has(varname))\n\t\t\treturn this;\n\n\t\tif (this.parent == undefined)\n\t\t\tthrow `Cannot resolve '${varname}' as it does not exist.`;\n\n\t\treturn this.parent.resolve(varname);\n\t}\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,MAAO,YAA0B;AAAA,EAIhC,YAAa,WAAyB;AACrC,SAAK,SAAS;AACd,SAAK,YAAY,oBAAI,IAAI;AAAA,EAC1B;AAAA,EAEO,WAAY,SAAiB,OAA+B;AAClE,QAAI,KAAK,UAAU,IAAI,OAAO,GAAG;AAChC,YAAM,2BAA2B;AAAA,IAClC;AAEA,SAAK,UAAU,IAAI,SAAS,KAAK;AACjC,WAAO;AAAA,EACR;AAAA,EAEO,UAAW,SAAiB,OAA+B;AACjE,UAAM,MAAM,KAAK,QAAQ,OAAO;AAChC,QAAI,UAAU,IAAI,SAAS,KAAK;AAChC,WAAO;AAAA,EACR;AAAA,EAEO,UAAW,SAA6B;AAC9C,UAAM,MAAM,KAAK,QAAQ,OAAO;AAChC,WAAO,IAAI,UAAU,IAAI,OAAO;AAAA,EACjC;AAAA,EAEO,QAAS,SAA8B;AAC7C,QAAI,KAAK,UAAU,IAAI,OAAO;AAC7B,aAAO;AAER,QAAI,KAAK,UAAU;AAClB,YAAM,mBAAmB;AAE1B,WAAO,KAAK,OAAO,QAAQ,OAAO;AAAA,EACnC;AACD;",
  "names": []
}
